<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecionando...</title>
  <script>
    // Configuração: URL da API do GitHub e número de segmentos de caminho para pular
    var GITHUB_API_URL = "https://api.github.com/repos/geanramos/regianeramos/issues/";
    var PATH_SEGMENTS_TO_SKIP = 0;

    // Função para verificar se uma string é uma URL válida
    function isValidUrl(url) {
      // Regex para validar uma URL
      var urlPattern = /^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w .-]*)*\/?$/;
      return urlPattern.test(url);
    }

    // Função para redirecionar com base no número da issue
    function redirect() {
      // Obter o número da issue da URL
      var issueNumber = window.location.pathname.split("/")[PATH_SEGMENTS_TO_SKIP + 1];

      // Montar o URL da issue na API do GitHub
      var apiUrl = GITHUB_API_URL + issueNumber;

      // Fazer uma requisição para a API do GitHub
      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          // Obter o título da issue
          var title = data.title;

          // Verificar se o título é uma URL válida fora do GitHub
          if (isValidUrl(title) && !title.startsWith("https://github.com/")) {
            // Redirecionar para o URL do título da issue
            window.location.href = title;
          } else {
            // Redirecionar para a página inicial
            window.location.href = "/";
          }
        })
        .catch(error => {
          console.error("Erro ao processar a requisição:", error);
          // Redirecionar para a página inicial em caso de erro
          window.location.href = "/";
        });
    }

    // Chamar a função de redirecionamento ao carregar a página
    redirect();
  </script>
</head>
<body>
</body>
</html>
